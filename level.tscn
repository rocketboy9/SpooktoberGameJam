[gd_scene load_steps=15 format=3 uid="uid://cogkgei4bpytl"]

[ext_resource type="Script" path="res://level.gd" id="1_4avv4"]
[ext_resource type="Texture2D" uid="uid://duwb1twkoya1m" path="res://images/240_F_443693407_zQJa1GCqtY6C0OyrRjYGlMDi15XdTaW1.jpg" id="1_gd7dh"]
[ext_resource type="PackedScene" uid="uid://cf42mal5pf385" path="res://Player/player.tscn" id="1_ig587"]
[ext_resource type="PackedScene" uid="uid://dsjheuvmivjxd" path="res://LevelObjects/Tree/tree.tscn" id="3_bio73"]
[ext_resource type="PackedScene" uid="uid://cdlic5ihoasqb" path="res://Ghost/ghost.tscn" id="3_p7d28"]
[ext_resource type="PackedScene" uid="uid://cdmoqtocxvqow" path="res://LevelObjects/Gravestone/gravestone.tscn" id="4_rmcpw"]
[ext_resource type="PackedScene" uid="uid://b3rdpmjeym5i7" path="res://ui_notes.tscn" id="5_o517h"]
[ext_resource type="Theme" path="res://images/Text.tres" id="7_si2ej"]

[sub_resource type="SegmentShape2D" id="SegmentShape2D_rttsb"]
a = Vector2(11492, 0)
b = Vector2(-11492, 0)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_ludcu"]
a = Vector2(0, -9794)
b = Vector2(0, 9794)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_a1fjp"]
a = Vector2(0, -9794)
b = Vector2(0, 9794)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_lol8x"]
a = Vector2(11492, 0)
b = Vector2(-11492, 0)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_5k2j3"]
bg_color = Color(0.14902, 0.0588235, 0.0588235, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_evjgr"]
bg_color = Color(0.6, 0, 0, 1)

[node name="Level" type="Node2D"]
script = ExtResource("1_4avv4")

[node name="Ground" type="Node2D" parent="."]
position = Vector2(238, 117)
metadata/_edit_lock_ = true

[node name="Grass" type="Sprite2D" parent="Ground"]
modulate = Color(0.294118, 0.294118, 0.294118, 1)
texture_repeat = 2
position = Vector2(58.5, 56)
scale = Vector2(1.24375, 1.46667)
texture = ExtResource("1_gd7dh")
region_enabled = true
region_rect = Rect2(-13146.7, -9035.11, 29912.8, 21839.3)

[node name="Ghosts" type="Node2D" parent="."]

[node name="Ghost" parent="Ghosts" instance=ExtResource("3_p7d28")]
position = Vector2(1619, 134)

[node name="Gravestones" type="Node2D" parent="."]
position = Vector2(469, 186)

[node name="Gravestone" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(-891, -282)

[node name="Gravestone2" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(-700, -281)

[node name="Gravestone3" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(766, -261)

[node name="Gravestone4" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(561, -261)

[node name="Gravestone5" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(332, -259)

[node name="Gravestone6" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(-34, -257)

[node name="Gravestone7" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(-257, -272)

[node name="Gravestone8" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(-444, -270)

[node name="Gravestone9" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(155, -253)

[node name="Gravestone10" parent="Gravestones" instance=ExtResource("4_rmcpw")]
position = Vector2(-1101, -296)

[node name="LevelScenery" type="Node2D" parent="."]

[node name="Tree" parent="LevelScenery" instance=ExtResource("3_bio73")]
position = Vector2(-341, -112)

[node name="Tree2" parent="LevelScenery" instance=ExtResource("3_bio73")]
position = Vector2(306, 259)

[node name="Player" parent="." instance=ExtResource("1_ig587")]
position = Vector2(608, 351)
metadata/_edit_lock_ = true

[node name="Camera2D" type="Camera2D" parent="Player"]
zoom = Vector2(0.5, 0.5)

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
color = Color(0.835294, 0.835294, 0.835294, 1)
energy = 1.39
blend_mode = 1
metadata/_edit_lock_ = true

[node name="MapBoundry" type="Node2D" parent="."]
metadata/_edit_lock_ = true

[node name="NorthBorder" type="Area2D" parent="MapBoundry"]
position = Vector2(0, -9794)
collision_mask = 2
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="MapBoundry/NorthBorder"]
shape = SubResource("SegmentShape2D_rttsb")

[node name="WestBorder" type="Area2D" parent="MapBoundry"]
position = Vector2(-11492, 0)
collision_mask = 2
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="MapBoundry/WestBorder"]
shape = SubResource("SegmentShape2D_ludcu")

[node name="EastBorder" type="Area2D" parent="MapBoundry"]
position = Vector2(11492, 1)
collision_mask = 2
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="MapBoundry/EastBorder"]
shape = SubResource("SegmentShape2D_a1fjp")

[node name="SouthBorder" type="Area2D" parent="MapBoundry"]
position = Vector2(0, 9794)
collision_mask = 2
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="MapBoundry/SouthBorder"]
shape = SubResource("SegmentShape2D_lol8x")

[node name="UINotes" parent="." instance=ExtResource("5_o517h")]

[node name="SpawnGhostTimer" type="Timer" parent="."]

[node name="UI" type="CanvasLayer" parent="."]

[node name="StaminAspectContainer" type="AspectRatioContainer" parent="UI"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -217.0
offset_bottom = 39.0
grow_horizontal = 0

[node name="StaminaVBoxContainer" type="VBoxContainer" parent="UI/StaminAspectContainer"]
layout_mode = 2

[node name="StaminaLabel" type="Label" parent="UI/StaminAspectContainer/StaminaVBoxContainer"]
layout_mode = 2
theme = ExtResource("7_si2ej")
theme_override_font_sizes/font_size = 25
text = "Stamina"
horizontal_alignment = 1

[node name="StaminaBar" type="ProgressBar" parent="UI/StaminAspectContainer/StaminaVBoxContainer"]
custom_minimum_size = Vector2(200, 25)
layout_mode = 2
size_flags_vertical = 4
theme_override_styles/background = SubResource("StyleBoxFlat_5k2j3")
theme_override_styles/fill = SubResource("StyleBoxFlat_evjgr")
show_percentage = false

[node name="GameOver" type="CanvasLayer" parent="."]
visible = false

[node name="GameOver" type="Control" parent="GameOver"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="GameOverBG" type="ColorRect" parent="GameOver/GameOver"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="GameOverContainer" type="CenterContainer" parent="GameOver/GameOver"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="GameOver/GameOver/GameOverContainer"]
layout_mode = 2

[node name="GameOverText" type="Label" parent="GameOver/GameOver/GameOverContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("7_si2ej")
text = "GAME OVER!"

[node name="RestartButton" type="Button" parent="GameOver/GameOver/GameOverContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("7_si2ej")
text = "Restart"

[node name="QuitButton" type="Button" parent="GameOver/GameOver/GameOverContainer/VBoxContainer"]
layout_mode = 2
theme = ExtResource("7_si2ej")
text = "Quit
"

[connection signal="game_over" from="Ghosts/Ghost" to="." method="_on_ghost_game_over"]
[connection signal="PressedInteract" from="Player" to="." method="_on_player_pressed_interact"]
[connection signal="body_entered" from="MapBoundry/NorthBorder" to="." method="_on_north_border_body_entered"]
[connection signal="body_entered" from="MapBoundry/WestBorder" to="." method="_on_west_border_body_entered"]
[connection signal="body_entered" from="MapBoundry/EastBorder" to="." method="_on_east_border_body_entered"]
[connection signal="body_entered" from="MapBoundry/SouthBorder" to="." method="_on_south_border_body_entered"]
[connection signal="pressed" from="GameOver/GameOver/GameOverContainer/VBoxContainer/RestartButton" to="." method="_on_restart_button_pressed"]
[connection signal="pressed" from="GameOver/GameOver/GameOverContainer/VBoxContainer/QuitButton" to="." method="_on_quit_button_pressed"]
